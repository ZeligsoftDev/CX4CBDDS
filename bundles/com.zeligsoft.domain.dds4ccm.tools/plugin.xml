<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension
         point="org.eclipse.ui.startup">
      <startup
            class="com.zeligsoft.domain.dds4ccm.tools.internal.emf.Startup">
      </startup>
   </extension>
   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            category="cxModelingPreference"
            class="com.zeligsoft.domain.dds4ccm.tools.ui.internal.preferences.DynamicURIMappingsPreferencePage"
            id="com.zeligsoft.domain.dds4ccm.tools.uriMappings"
            name="%page.name.0">
      </page>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="true"
            locationURI="popup:org.eclipse.papyrus.views.modelexplorer.modelexplorer.popup?after=tools">
         <command
               commandId="com.zeligsoft.domain.dds4ccm.tools.packageimportcommand"
               icon="icons/view16/cx-perspective.gif"
               id="com.zeligsoft.domain.dds4ccm.tools.packageimport"
               label="Import ICM Model">
         </command>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            categoryId="org.eclipse.papyrus.editor.category"
            defaultHandler="com.zeligsoft.domain.dds4ccm.tools.actions.ImportICMModelHandler"
            description="Import ICM Model"
            id="com.zeligsoft.domain.dds4ccm.tools.packageimportcommand"
            name="Import ICM Model">
      </command>
   </extension>
       <!-- Custom properties sections -->
    <extension
          point="com.zeligsoft.cx.ui.properties.customPropertySection">
       <PropertySection
             append="true"
             class="com.zeligsoft.domain.dds4ccm.tools.providers.DynamicPathmapCustomPropertySection"
             concept="DDS4CCM::DDS4CCM::DDS4CCMModel"
             property="modelType">
       </PropertySection>
    </extension>
    <extension
          point="org.eclipse.ui.menus">
       <menuContribution
             allPopups="false"
             locationURI="popup:org.eclipse.ui.navigator.ProjectExplorer#PopupMenu?after=additions">
          <command
                commandId="com.zeligsoft.domain.dds4ccm.tools.fixReferencesCommand"
                label="Fix CX Model references"
                style="push">
             <visibleWhen
                   checkEnabled="false">
                <with
                      variable="selection">
                   <iterate
                         ifEmpty="false"
                         operator="and">
                      <adapt
                            type="org.eclipse.core.resources.IFile">
                         <or>
                            <test
                                  property="org.eclipse.core.resources.extension"
                                  value="uml">
                            </test>
                         </or>
                      </adapt>
                   </iterate>
                </with>
             </visibleWhen>
          </command>
       </menuContribution>
    </extension>
    <extension
          point="org.eclipse.ui.commands">
       <command
             defaultHandler="com.zeligsoft.domain.dds4ccm.tools.actions.FixModelReferencesHandler"
             id="com.zeligsoft.domain.dds4ccm.tools.fixReferencesCommand"
             name="Fix CX Model References">
       </command>
    </extension>

</plugin>
