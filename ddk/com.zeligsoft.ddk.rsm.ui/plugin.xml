<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.2"?>
<!--
    Copyright (c) 2020 Northrop Grumman Systems Corporation.
   
    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at
   
    http://www.apache.org/licenses/LICENSE-2.0
   
    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
 -->
<plugin>

	<extension
          point="org.eclipse.ui.menus">
       <menuContribution
             allPopups="false"
             locationURI="popup:org.eclipse.papyrus.views.modelexplorer.modelexplorer.popup">
          <menu
                id="com.zeligsoft.ddk.ui.zeligsoftTools"
                label="Zeligsoft Tools">
          </menu>
       </menuContribution>
    </extension>
    
    <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="true"
            locationURI="popup:com.zeligsoft.ddk.ui.zeligsoftTools">
         <command
               commandId="com.zeligsoft.ddk.zdl.ui.generateConceptsConstantCommand"
               id="com.zeligsoft.ddk.zdl.ui.generateConceptsConstant"
               label="Generate Concepts Constant">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <test
                        property="com.zeligsoft.zdl.tester.isZDLConcept"
                        value="ZDL::Constructs::DomainModel">
                  </test>
               </with>
            </visibleWhen>
         </command>
         <command
               commandId="com.zeligsoft.ddk.zdl.ui.configureRedefinitionCommand"
               id="com.zeligsoft.ddk.zdl.ui.configureRedefinition"
               label="Configure Redefinition">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <test
                        property="org.eclipse.papyrus.views.modelexplorer.tester.eClass"
                        value="uml::RedefinableElement">
                  </test>
                  <count
                        value="2">
                  </count>
               </with>
            </visibleWhen>
         </command>
         <command
               commandId="com.zeligsoft.ddk.zdl.ui.configureSubsettingCommand"
               id="com.zeligsoft.ddk.zdl.ui.configureSubsetting"
               label="Configure Subsetting">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <test
                        property="org.eclipse.papyrus.views.modelexplorer.tester.eClass"
                        value="uml::Property">
                  </test>
                  <count
                        value="2">
                  </count>
               </with>
            </visibleWhen>
         </command>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            defaultHandler="com.zeligsoft.ddk.rsm.ui.actions.GenerateConceptsConstantHandler"
            id="com.zeligsoft.ddk.zdl.ui.generateConceptsConstantCommand"
            name="Generate Concepts Constant">
      </command>
      <command
            defaultHandler="com.zeligsoft.ddk.rsm.ui.actions.ConfigureRedefinitionHandler"
            id="com.zeligsoft.ddk.zdl.ui.configureRedefinitionCommand"
            name="Configure Redefinition">
      </command>
      <command
            defaultHandler="com.zeligsoft.ddk.rsm.ui.actions.ConfigureSubsettingHandler"
            id="com.zeligsoft.ddk.zdl.ui.configureSubsettingCommand"
            name="Configure Subsetting">
      </command>
   </extension>



    
   <!-- Add the ZDL-driven dynamic palette to Class and Free-form diagrams -->
   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            class="com.zeligsoft.base.ui.preferences.RootPreferencePage"
            id="com.zeligsoft"
            name="%preference.root.zeligsoft">
      </page>
      <page
            category="com.zeligsoft"
            class="com.zeligsoft.ddk.rsm.ui.preferences.DomainDevelopmentPreferencePage"
            id="com.zeligsoft.ddk.rsm.ui.domainDevelopmentPrefPage"
            name="%page.name.0">
      </page>
   </extension>
   
       <!-- CBDDS properties tab and sections -->
    <extension point="org.eclipse.ui.views.properties.tabbed.propertyTabs">
      <propertyTabs contributorId="TreeOutlinePage">
         <propertyTab
               afterTab="uml"
               category="org.eclipse.papyrus"
               id="com.zeligsoft.propertyTab.ZDLDomainPropertyTab"
               label="ZDL"/>
      </propertyTabs>
    </extension>    
    <extension
          point="org.eclipse.ui.views.properties.tabbed.propertySections">
       <propertySections
             contributorId="TreeOutlinePage">
          <propertySection
                class="com.zeligsoft.cx.ui.properties.sections.DomainPropertySection"
                filter="com.zeligsoft.ddk.rsm.ui.filters.ZDLDomainFilter"
                id="com.zeligsoft.propertyTab.ZDLDomainPropertySection"
                tab="com.zeligsoft.propertyTab.ZDLDomainPropertyTab">
          </propertySection>
       </propertySections>
    </extension>
</plugin>
